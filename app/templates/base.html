<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>APG Importer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
  <nav style="padding:10px;border-bottom:1px solid #ddd;">
  <a href="/">APG Sync</a>
  <a style="margin-left:16px" href="/api/sync/run" onclick="return runSync(event)">Run Sync (once)</a>
  <a style="margin-left:16px" href="/settings">Schedule</a>
  <button id="run-once-btn" type="button">Run Sync (once)</button>

  </nav>


  <div class="container">
    {% block content %}{% endblock %}
  </div>

  <script>
  async function runSync(e){
    e.preventDefault();
    const res = await fetch('/api/sync/run', {method:'POST'});
    const data = await res.json();
    alert('Sync run #' + data.id + ' ' + (data.ok ? 'OK' : 'FAILED'));
    location.reload();
    return false;
  }
  </script>
</body>
</html>
